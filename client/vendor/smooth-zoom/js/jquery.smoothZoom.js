!function(a,b,c){function e(b,c){var e=this,h=a.extend({},d,c);if(this.$elem=b,this.hasTouch=this.checkTouchSupport(),this.sW=h.width,this.sH=h.height,this.init_zoom=h.initial_ZOOM/100,this.init_pos=h.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" "),this.zoom_max=h.zoom_MAX/100,this.zoom_min=h.zoom_MIN/100,this.zoom_single=f(h.zoom_SINGLE_STEP),this.zoom_fit=f(h.zoom_OUT_TO_FIT),this.zoom_speed=1+((0===h.animation_SPEED||h.animation_SPEED?h.animation_SPEED:h.animation_SPEED_ZOOM)+1)/20,this.zoom_show=f(h.zoom_BUTTONS_SHOW),this.pan_speed_o=0===h.animation_SPEED||h.animation_SPEED?h.animation_SPEED:h.animation_SPEED_PAN,this.pan_show=f(h.pan_BUTTONS_SHOW),this.pan_limit=f(h.pan_LIMIT_BOUNDARY),this.pan_rev=f(h.pan_REVERSE),this.reset_align=h.reset_ALIGN_TO.toLowerCase().split(" "),this.reset_to_zmin=f(h.reset_TO_ZOOM_MIN),this.bu_size=2*parseInt((this.hasTouch?h.button_SIZE_TOUCH_DEVICE:h.button_SIZE)/2),this.bu_color=h.button_COLOR,this.bu_bg=h.button_BG_COLOR,this.bu_bg_alpha=h.button_BG_TRANSPARENCY/100,this.bu_icon=h.button_ICON_IMAGE,this.bu_auto=f(h.button_AUTO_HIDE),this.bu_delay=1e3*h.button_AUTO_HIDE_DELAY,this.bu_align=h.button_ALIGN.toLowerCase().split(" "),this.bu_margin=h.button_MARGIN,this.bu_round=f(h.button_ROUND_CORNERS),this.touch_drag=f(h.touch_DRAG),this.mouse_drag=f(h.mouse_DRAG),this.mouse_wheel=f(h.mouse_WHEEL),this.mouse_wheel_cur=f(h.mouse_WHEEL_CURSOR_POS),this.mouse_dbl_click=f(h.mouse_DOUBLE_CLICK),this.ani_smooth=Math.max(1,(h.animation_SMOOTHNESS+1)/1.45),this.bg_color=h.background_COLOR,this.bord_size=h.border_SIZE,this.bord_color=h.border_COLOR,this.bord_alpha=h.border_TRANSPARENCY/100,this.container=h.container,this.image_url=h.image_url,this.image_width=h.image_original_width,this.image_height=h.image_original_height,this.responsive=f(h.responsive),this.maintain_ratio=f(h.responsive_maintain_ratio),this.w_max=h.max_WIDTH,this.h_max=h.max_HEIGHT,this.onLOAD=h.on_IMAGE_LOAD,this.onUPDATE=h.on_ZOOM_PAN_UPDATE,this.onZOOM_PAN=h.on_ZOOM_PAN_COMPLETE,this.onLANDMARK=h.on_LANDMARK_STATE_CHANGE,this._x,this._y,this._w,this._h,this._sc=0,this.rA=1,this.rF=1,this.rR=1,this.iW=0,this.iH=0,this.tX=0,this.tY=0,this.oX=0,this.oY=0,this.fX=0,this.fY=0,this.dX=0,this.dY=0,this.cX=0,this.cY=0,this.transOffX=0,this.transOffY=0,this.focusOffX=0,this.focusOffY=0,this.offX=0,this.offY=0,this._playing=!1,this._dragging=!1,this._onfocus=!1,this._moveCursor=!1,this._wheel=!1,this._recent="zoomOut",this._pinching=!1,this._landmark=!1,this._rA,this._centx,this._centy,this._onButton=!1,this._onHitArea=!1,this.cFlag={_zi:!1,_zo:!1,_ml:!1,_mr:!1,_mu:!1,_md:!1,_rs:!1,_nd:!1},this.$holder,this.$hitArea,this.$controls,this.$loc_cont,this.map_coordinates=[],this.locations=[],this.buttons=[],this.border=[],this.buttons_total=7,this.cButtId=0,this.pan_speed,this.auto_timer,this.ani_timer,this.ani_end,this.focusSpeed=this.reduction=.5,this.orig_style,this.mapAreas,this.icons,this.show_at_zoom,this.assetsLoaded=!1,this.zStep=0,this.sRed=300,this.use3D=h.use_3D_Transform&&j,navigator.pointerEnabled||navigator.msPointerEnabled?(navigator.pointerEnabled?(this.pointerDown="pointerdown",this.pointerUp="pointerup",this.pointerMove="pointermove"):navigator.msPointerEnabled&&(this.pointerDown="MSPointerDown",this.pointerUp="MSPointerUp",this.pointerMove="MSPointerMove"),this.event_down=this.pointerDown+".sz",this.event_up=this.pointerUp+".sz",this.event_move=this.pointerMove+".sz",this.supportsPointer=!0,this.pointers=[]):this.hasTouch?(this.event_down="touchstart.sz",this.event_up="touchend.sz",this.event_move="touchmove.sz"):(this.event_down="mousedown.sz",this.event_up="mouseup.sz",this.event_move="mousemove.sz"),""==this.image_url)this.$image=b,this.id=this.$image.attr("id");else{var i=new Image;this.image_width&&(i.width=this.image_width),this.image_height&&(i.height=this.image_height),i.src=this.image_url,this.$image=a(i).appendTo(b)}this.setContainer();var k;if(!this.bu_icon){var l=/url\(["']?([^'")]+)['"]?\)/;k=a('<div class="smooth_zoom_icons"></div>'),this.$holder.append(k),this.bu_icon=k.css("background-image").replace(l,"$1"),"none"==this.bu_icon&&(this.bu_icon="zoom_assets/icons.png"),k.remove()}this.$image.css("-moz-transform")&&g?(k=a('<div style="-moz-transform: translate(1px, 1px)"></div>'),this.$holder.append(k),this.fixMoz=1!==k.position().left,k.remove()):this.fixMoz=!1,this.$image.hide(),this.imgList=[{loaded:!1,src:this.bu_icon||"zoom_assets/icons.png"},{loaded:!1,src:""==this.image_url?this.$image.attr("src"):this.image_url}],a.each(this.imgList,function(b){var c=new Image;a(c).bind("load",{id:b,self:e},e.loadComplete).bind("error",{id:b,self:e},e.loadComplete),c.src=e.imgList[b].src})}function f(a){return a===!0||!(!a||(a=a.toLowerCase(),"yes"!=a&&"true"!=a))}var d={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:5.5,animation_SPEED_ZOOM:5.5,animation_SPEED_PAN:5.5,zoom_MAX:800,zoom_MIN:"",zoom_SINGLE_STEP:!1,zoom_OUT_TO_FIT:!0,zoom_BUTTONS_SHOW:!0,pan_BUTTONS_SHOW:!0,pan_LIMIT_BOUNDARY:!0,pan_REVERSE:!1,reset_ALIGN_TO:"center center",reset_TO_ZOOM_MIN:!0,button_SIZE:18,button_SIZE_TOUCH_DEVICE:30,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:!1,button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:!0,touch_DRAG:!0,mouse_DRAG:!0,mouse_WHEEL:!0,mouse_WHEEL_CURSOR_POS:!0,mouse_DOUBLE_CLICK:!0,background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",image_original_width:"",image_original_height:"",container:"",on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:"",use_3D_Transform:!0,responsive:!1,responsive_maintain_ratio:!0,max_WIDTH:"",max_HEIGHT:""};e.prototype={loadComplete:function(a){var b=a.data.self,c=!0;b.imgList[a.data.id].loaded=!0;for(var d=0;d<b.imgList.length;d++)b.imgList[d].loaded||(c=!1);c&&(b.assetsLoaded=!0,""!==b.onLOAD&&b.onLOAD(),b.init())},checkTouchSupport:function(){var a="ontouchstart"in b||"createTouch"in c;return navigator.pointerEnabled?a=Boolean(a||navigator.maxTouchPoints):navigator.msPointerEnabled&&(a=Boolean(a||navigator.msMaxTouchPoints)),a},init:function(){var k,l,b=this,d=b.$image,e=b.sW,f=b.sH,m=(b.container,b.pan_show),n=b.zoom_show,o=b.$controls,p=b.buttons,q=b.cFlag,r=b.bu_align,s=b.bu_margin,t=b.$holder;b.orig_style=b.getStyle(),d.attr("galleryimg","no"),navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)||(d.removeAttr("width"),d.removeAttr("height"));for(var u=d,v=[],w=0;w<5&&(u&&"BODY"!==u[0].tagName&&"HTML"!==u[0].tagName);w++)"none"==u.css("display")&&(u.css("display","block"),v.push(u)),u=u.parent();b.iW=d.width(),b.iH=d.height();for(var w=0;w<v.length;w++)v[w].css("display","none");b.rF=b.rR=b.checkRatio(e,f,b.iW,b.iH,b.zoom_fit),0==b.zoom_min||0!=b.init_zoom?(""!=b.init_zoom?b.rA=b._sc=b.init_zoom:b.rA=b._sc=b.rF,0!=b.zoom_min&&(b.rF=b.zoom_min,b.reset_to_zmin&&(b.rR=b.zoom_min))):b.rF<b.zoom_min?(b.rF=b.zoom_min,b.reset_to_zmin&&(b.rR=b.zoom_min),b.rA=b._sc=b.zoom_min):b.rA=b._sc=b.rR,b._w=b._sc*b.iW,b._h=b._sc*b.iH,""==b.init_pos?(b._x=b.tX=(e-b._w)/2,b._y=b.tY=(f-b._h)/2):(b._x=b.tX=e/2-parseInt(b.init_pos[0])*b._sc,b._y=b.tY=f/2-parseInt(b.init_pos[1])*b._sc,b.oX=(b.tX-(e-b._w)/2)/(b._w/e),b.oY=(b.tY-(f-b._h)/2)/(b._h/f)),b.pan_limit&&!b._moveCursor&&b.init_zoom==b.rF||!b.mouse_drag||(d.css("cursor","move"),b.$hitArea.css("cursor","move")),g&&b.$image.css(h,"0 0"),b.use3D&&d.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),d.css({position:"absolute","z-index":2,left:"0px",top:"0px","-webkit-box-shadow":"1px 1px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){t.css("background-image","none")});var b=b,x=b.bu_size,y=50,z=2,A=3,B=Math.ceil(b.bu_size/4),C=x<16?50:0,D=x-z;m?(k=n?parseInt(x+.85*x+3*D+2*A+2*B):parseInt(3*D+2*A+2*B),l=parseInt(3*D+2*A+2*B)):n?(k=parseInt(x+2*B),l=parseInt(2*x+3*B),k=2*parseInt(k/2),l=2*parseInt(l/2)):(k=0,l=0);var H,I,J,K,E=(y-x)/2,F=k-2*(x-(m?z:0))-B-A,G=l/2-(x-(m?z:0))/2;"top"==r[0]?(I="top",K=s):"center"==r[0]?(I="top",K=parseInt((f-l)/2)):(I="bottom",K=s),"right"==r[1]?(H="right",J=s):"center"==r[1]?(H="right",J=parseInt((e-k)/2)):(H="left",J=s),o=a('<div style="position: absolute; '+H+":"+J+"px; "+I+": "+K+"px; width: "+k+"px; height: "+l+'px; z-index: 20;" class="noSel">\t\t\t\t\t<div class="noSel controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;">\t\t\t\t\t</div>\t\t\t\t</div>'),t.append(o);var L=o.find(".controlsBg");b.bu_round?i?L.css(i,(C>0?4:5)+"px").css("background-color",b.bu_bg):b.roundBG(L,"cBg",k,l,C>0?4:5,375,b.bu_bg,b.bu_icon,1,C?50:0):L.css("background-color",b.bu_bg),L.css("opacity",b.bu_bg_alpha),p[0]={_var:"_zi",l:B,t:m?(l-2*x-2*A+2)/2:B,w:x,h:x,bx:-E,by:-E-C},p[1]={_var:"_zo",l:B,t:m?(l-2*x-2*A+2)/2+x+2*A-2:l-x-B,w:x,h:x,bx:-y-E,by:-E-C},p[2]={_var:b.pan_rev?"_ml":"_mr",l:F-D-A,t:G,w:D,h:D,bx:-(z/2)-2*y-E,by:-(z/2)-E-C},p[3]={_var:b.pan_rev?"_mr":"_ml",l:F+D+A,t:G,w:D,h:D,bx:-(z/2)-3*y-E,by:-(z/2)-E-C},p[4]={_var:b.pan_rev?"_md":"_mu",l:F,t:G+D+A,w:D,h:D,bx:-(z/2)-4*y-E,by:-(z/2)-E-C},p[5]={_var:b.pan_rev?"_mu":"_md",l:F,t:G-D-A,w:D,h:D,bx:-(z/2)-5*y-E,by:-(z/2)-E-C},p[6]={_var:"_rs",l:F,t:G,w:D,h:D,bx:-(z/2)-6*y-E,by:-(z/2)-E-C};for(var w=0;w<7;w++){p[w].$ob=a('<div style="position: absolute; display: '+(w<2?n?"block":"none":m?"block":"none")+"; left: "+(p[w].l-1)+"px; top: "+(p[w].t-1)+"px; width: "+(p[w].w+2)+"px; height: "+(p[w].h+2)+"px; z-index:"+(w+1)+';" class="noSel">\t\t\t\t\t\t</div>').css("opacity",.7).bind("mouseover.sz mouseout.sz "+b.event_down,{id:w},function(c){b._onfocus=!1;var d=a(this);"mouseover"==c.type?d.css("opacity")>.5&&d.css("opacity",1):"mouseout"==c.type?d.css("opacity")>.5&&d.css("opacity",.7):"mousedown"!=c.type&&"touchstart"!=c.type&&c.type!=b.pointerDown||(b.cButtId=c.data.id,b._onButton=!0,b._wheel=!1,d.css("opacity")>.5&&(d.css("opacity",1),t.find("#"+p[b.cButtId]._var+"norm").hide(),t.find("#"+p[b.cButtId]._var+"over").show(),b.cButtId<=1&&b.zoom_single?q[p[b.cButtId]._var]||(b.sRed=300,q[p[b.cButtId]._var]=!0):b.cButtId<6?q[p[b.cButtId]._var]=!0:(q._rs=!0,b.rA=b.rR,"top"==b.reset_align[0]?b.fY=b.sH/2*(b.rA/2):"bottom"==b.reset_align[0]?b.fY=-(b.sH/2)*(b.rA/2):b.fY=0,"left"==b.reset_align[1]?b.fX=b.sW/2*(b.rA/2):"right"==b.reset_align[1]?b.fX=-(b.sW/2)*(b.rA/2):b.fX=0),b.focusOffX=b.focusOffY=0,b.changeOffset(!0,!0),b._playing||b.Animate()),c.preventDefault(),c.stopPropagation())});var M=a('<div id="'+p[w]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+p[w].w+"px; height: "+p[w].h+"px; "+(i||!b.bu_round?"background:"+b.bu_color:"")+'">\t\t\t\t\t</div>'),N=a('<div id="'+p[w]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(p[w].w+2)+"px; height: "+(p[w].h+2)+"px; display: none; "+(i||!b.bu_round?"background:"+b.bu_color:"")+'">\t\t\t\t\t</div>'),O=a('<div id="'+p[w]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+p[w].w+"px; height: "+p[w].h+"px; background: transparent url("+b.bu_icon+") "+p[w].bx+"px "+p[w].by+'px no-repeat;" >\t\t\t\t\t</div>');p[w].$ob.append(M,N,O),o.append(p[w].$ob),b.bu_round&&(i?(M.css(i,"2px"),N.css(i,"2px")):(b.roundBG(M,p[w]._var+"norm",p[w].w,p[w].h,2,425,b.bu_color,b.bu_icon,w+1,C?50:0),b.roundBG(N,p[w]._var+"over",p[w].w+2,p[w].h+2,2,425,b.bu_color,b.bu_icon,w+1,C?50:0)))}if(a(c).bind(b.event_up+b.id,{self:b},b.mouseUp),(b.mouse_drag&&!b.hasTouch||b.touch_drag&&b.hasTouch)&&(b.$holder.bind(b.event_down,{self:b},b.mouseDown),b.hasTouch&&a(c).bind(b.event_move+b.id,{self:b},b.mouseDrag)),b.mouse_dbl_click){var P,Q,R=1;b.$holder.bind("dblclick.sz",function(a){b.focusOffX=a.pageX-t.offset().left-b.sW/2,b.focusOffY=a.pageY-t.offset().top-b.sH/2,b.changeOffset(!0,!0),b._wheel=!1,b.rA<b.zoom_max&&R==-1&&P!=b.focusOffX&&Q!=b.focusOffY&&(R=1),P=b.focusOffX,Q=b.focusOffY,b.rA>=b.zoom_max&&1==R&&(R=-1),b.rA<=b.rF&&R==-1&&(R=1),R>0?(b.rA*=2,b.rA=b.rA>b.zoom_max?b.zoom_max:b.rA,q._zi=!0,clearTimeout(b.ani_timer),b._playing=!0,b.Animate(),q._zi=!1):(b.rA/=2,b.rA=b.rA<b.rF?b.rF:b.rA,q._zo=!0,clearTimeout(b.ani_timer),b._playing=!0,b.Animate(),q._zo=!1),a.preventDefault(),a.stopPropagation()})}b.mouse_wheel&&t.bind("mousewheel.sz",{self:this},b.mouseWheel),b.bu_auto&&t.bind("mouseleave.sz",{self:this},b.autoHide),o.bind(b.event_down,function(a){a.preventDefault(),a.stopPropagation()}),b.mouse_dbl_click&&o.bind("dblclick.sz",function(a){a.preventDefault(),a.stopPropagation()}),a(".noSel").each(function(){this.onselectstart=function(){return!1}}),b.$holder=t,b.$controls=o,b.sW=e,b.sH=f,b.cBW=k,b.cBH=l,b.Animate()},setContainer:function(){var c=this,d=c.$image,e=c.bord_size,g=c.border,h=c.$holder;if(""==c.container&&""==c.image_url)h=c.$image.wrap('<div class="noSel smooth_zoom_preloader">\t\t\t\t\t</div>').parent();else if(h=""==c.image_url?a("#"+c.container):c.$elem,h.addClass("noSel smooth_zoom_preloader"),c.locations=[],c.$loc_cont=h.find(".landmarks"),c.$loc_cont[0]){var i=c.$loc_cont.children(".item");c.loc_clone=c.$loc_cont.clone(),c.show_at_zoom=parseInt(c.$loc_cont.data("show-at-zoom"),10)/100,c.allow_scale=f(c.$loc_cont.data("allow-scale")),c.allow_drag=f(c.$loc_cont.data("allow-drag")),i.each(function(){c.setLocation(a(this))})}h.css({position:"relative",overflow:"hidden","text-align":"left","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-ms-touch-action":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":c.bg_color,"background-position":"center center","background-repeat":"no-repeat"}),c.$hitArea=a('<div style="position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(h),c.getContainerSize(c.sW,c.sH,h,c.w_max,c.h_max),c.responsive&&a(b).bind("orientationchange.sz"+c.id+" resize.sz"+c.id,{self:c},c.resize);var j=c.sW,k=c.sH;h.css({width:j,height:k}),e>0&&(g[0]=a('<div style="position: absolute;\twidth: '+e+"px; height: "+k+"px;\ttop: 0px; left: 0px; z-index: 3; background-color: "+c.bord_color+';"></div>').css("opacity",c.bord_alpha),g[1]=a('<div style="position: absolute;\twidth: '+e+"px; height: "+k+"px;\ttop: 0px; left: "+(j-e)+"px; z-index: 4; background-color: "+c.bord_color+';"></div>').css("opacity",c.bord_alpha),g[2]=a('<div style="position: absolute;\twidth: '+(j-2*e)+"px; height: "+e+"px; top: 0px; left: "+e+"px; z-index: 5; background-color: "+c.bord_color+'; line-height: 1px;"></div>').css("opacity",c.bord_alpha),g[3]=a('<div style="position: absolute;\twidth: '+(j-2*e)+"px; height: "+e+"px; top: "+(k-e)+"px; left: "+e+"px; z-index: 6; background-color: "+c.bord_color+'; line-height: 1px;"></div>').css("opacity",c.bord_alpha),h.append(g[0],g[1],g[2],g[3])),void 0!=d.attr("usemap")&&(c.mapAreas=a("map[name='"+d.attr("usemap").split("#").join("")+"']").children("area"),c.mapAreas.each(function(b){var d=a(this);d.css("cursor","pointer"),c.mouse_drag&&d.bind(c.event_down,{self:c},c.mouseDown),c.mouse_wheel&&d.bind("mousewheel.sz",{self:c},c.mouseWheel),c.map_coordinates.push(d.attr("coords").split(","))})),c.$holder=h,c.sW=j,c.sH=k},getContainerSize:function(a,b,c,d,e){""===a||0===a?a=""==this.image_url?Math.max(c.parent().width(),100):Math.max(c.width(),100):!isNaN(a)||String(a).indexOf("px")>-1?(a=this.oW=parseInt(a),this.responsive&&(a=Math.min(c.parent().width(),a))):a=String(a).indexOf("%")>-1?c.parent().width()*(a.split("%")[0]/100):100,0!==d&&""!==d&&(a=Math.min(a,d)),b=""===b||0===b?""==this.image_url?Math.max(c.parent().height(),100):Math.max(c.height(),100):!isNaN(b)||String(b).indexOf("px")>-1?this.oH=parseInt(b):String(b).indexOf("%")>-1?c.parent().height()*(b.split("%")[0]/100):100,0!==e&&""!==e&&(b=Math.min(b,e)),this.oW&&a!==this.oW&&this.oH&&this.maintain_ratio&&(b=a/(this.oW/this.oH)),this.sW=a,this.sH=b},setLocation:function(b){var e,i,j,k,c=this,d=b;if(h&&d.css(h,"0 0"),d.css({display:"block","z-index":2}),c.use3D&&d.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),e=d.outerWidth()/2,i=d.outerHeight()/2,j=d.data("position").split(","),k=d.data("allow-scale"),k=void 0==k?c.allow_scale:f(k),d.hasClass("mark")){var m=(d.find("img").css("vertical-align","top").width(),parseInt(-d.width()/2-parseInt(d.css("padding-left")))),n=parseInt(-d.height()/2-parseInt(d.css("padding-top"))),o=d.height();a(d.children()[0]).css({position:"absolute",left:m,top:n});var p=d.find(".text");p.length&&p.css({left:-m-parseInt(p.width()/2)-parseInt(p.css("padding-left")),top:o}),c.locations.push({ob:d,x:parseInt(j[0]),y:parseInt(j[1]),w2:e,h2:i,w2pad:e+(p[0]?parseInt(p.css("padding-left")):0),vis:!1,lab:!1,lpx:"0",lpy:"0",showAt:isNaN(d.data("show-at-zoom"))?c.show_at_zoom:parseInt(d.data("show-at-zoom"),10)/100,scale:k})}else if(d.hasClass("lable")){var q=d.data("bg-color"),r=d.data("bg-opacity"),s=a(d.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-e,top:-i});if(c.locations.push({ob:d,x:parseInt(j[0]),y:parseInt(j[1]),w2:e,h2:i,w2pad:e,vis:!1,lab:!0,lpx:"0",lpy:"0",showAt:isNaN(d.data("show-at-zoom"))?c.show_at_zoom:parseInt(d.data("show-at-zoom"),10)/100,scale:k}),""!==q){q||(q="#000000",r=.7);var t=a('<div style="position: absolute; left: '+-e+"px; top: "+-i+"px; width: "+2*(e-parseInt(s.css("padding-left")))+"px; height:"+2*(i-parseInt(s.css("padding-top")))+"px; background-color: "+q+';"></div>').appendTo(d);r&&t.css("opacity",r)}}d.hide(),g&&d.css("opacity",0),c.allow_drag||d.bind(c.event_down,function(a){a.stopPropagation()})},getStyle:function(){var a=this.$image;return{prop_origin:[h,h!==!1&&void 0!==h?a.css(h):null],prop_transform:[g,g!==!1&&void 0!==g?a.css(g):null],position:["position",a.css("position")],"z-index":["z-index",a.css("z-index")],cursor:["cursor",a.css("cursor")],left:["left",a.css("left")],top:["top",a.css("top")],width:["width",a.css("width")],height:["height",a.css("height")]}},checkRatio:function(a,b,c,d,e){var f;return c==a&&d==b?f=1:c<a&&d<b?(f=a/c,e?f*d>b&&(f=b/d):(f*d<b&&(f=b/d),a/c!==b/d&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))):(f=a/c,e?(f*d>b&&(f=b/d),f<this.init_zoom&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move"))):(f*d<b&&(f=b/d),a/c!==b/d&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))),f},getDistance:function(a,b,c,d){return Math.sqrt(Math.abs((c-a)*(c-a)+(d-b)*(d-b)))},mouseDown:function(b){var f,g,h,d=b.data.self,e=b.originalEvent;d._onfocus=d._dragging=!1,d.cFlag._nd&&(d._onHitArea=!0,d.samePointRelease=!1,d.fixMoz&&d.correctTransValue(),b.type==d.pointerDown&&(h=e.MSPOINTER_TYPE_MOUSE&&e.pointerType===e.MSPOINTER_TYPE_MOUSE||"mouse"==e.pointerType,d.pointers.push({pageX:e.pageX,pageY:e.pageY,id:e.pointerId}),g=d.pointers.length,f=d.pointers),"mousedown"==b.type||h?(d.stX=e.pageX||b.pageX,d.stY=e.pageY||b.pageY,d.offX=d.stX-d.$holder.offset().left-d.$image.position().left,d.offY=d.stY-d.$holder.offset().top-d.$image.position().top,a(c).bind(d.event_move+d.id,{self:d},d.mouseDrag)):("touchstart"==b.type&&(g=e.targetTouches.length,f=e.touches),g>1?(d._pinching=!0,d._rA=d.rA,d.dStart=d.getDistance(f[0].pageX,f[0].pageY,f[1].pageX,f[1].pageY)):(d.offX=f[g-1].pageX-d.$holder.offset().left-d.$image.position().left,d.offY=f[g-1].pageY-d.$holder.offset().top-d.$image.position().top,d.setDraggedPos(f[g-1].pageX-d.$holder.offset().left-d.offX,f[g-1].pageY-d.$holder.offset().top-d.offY,d._sc),d._recent="drag",d._dragging=!0))),"mousedown"!=b.type&&b.type!=d.pointerDown||b.preventDefault()},mouseDrag:function(a){var d,e,b=a.data.self,c=a.originalEvent;if("mousemove"==a.type)return b.setDraggedPos(a.pageX-b.$holder.offset().left-b.offX,a.pageY-b.$holder.offset().top-b.offY,b._sc),b._recent="drag",b._dragging=!0,b._playing||b.Animate(),!1;if((b._dragging||b._pinching)&&a.preventDefault(),b._onHitArea){if(a.type==b.pointerMove){for(var f=0;f<b.pointers.length;f++)c.pointerId==b.pointers[f].id&&(b.pointers[f].pageX=c.pageX,b.pointers[f].pageY=c.pageY);d=b.pointers,e=b.pointers.length}else d=c.touches,e=d.length;if(!(e>1))return b.setDraggedPos(d[0].pageX-b.$holder.offset().left-b.offX,d[0].pageY-b.$holder.offset().top-b.offY,b._sc),b._recent="drag",b._dragging=!0,b._playing||b.Animate(),!1;b._pinching||(b._pinching=!0,b._rA=b.rA,b.dStart=b.getDistance(d[0].pageX,d[0].pageY,d[1].pageX,d[1].pageY)),b._centx=(d[0].pageX+d[1].pageX)/2,b._centy=(d[0].pageY+d[1].pageY)/2,b.focusOffX=b._centx-b.$holder.offset().left-b.sW/2,b.focusOffY=b._centy-b.$holder.offset().top-b.sH/2,b.changeOffset(!0,!0),b._wheel=!0,b._dragging=!1,b.zoom_single?b.sRed=300:(b.dEnd=b.getDistance(d[0].pageX,d[0].pageY,d[1].pageX,d[1].pageY),b.rA=b._rA*(b.dEnd/b.dStart),b.rA=b.rA>b.zoom_max?b.zoom_max:b.rA,b.rA=b.rA<b.rF?b.rF:b.rA),b._sc<b.rA?(b.cFlag._zo=!1,b.cFlag._zi=!0):(b.cFlag._zi=!1,b.cFlag._zo=!0),b._playing||b.Animate()}},mouseUp:function(b){var d=b.data.self;return d.pointers=[],d._onButton?(d.$holder.find("#"+d.buttons[d.cButtId]._var+"norm").show(),d.$holder.find("#"+d.buttons[d.cButtId]._var+"over").hide(),6!==d.cButtId&&(d.cFlag[d.buttons[d.cButtId]._var]=!1),"touchend"==b.type&&d.buttons[d.cButtId].$ob.css("opacity")>.5&&d.buttons[d.cButtId].$ob.css("opacity",.7),d._onButton=!1,b.stopPropagation(),!1):void(d._onHitArea&&(d.hasTouch||a(c).unbind(d.event_move+d.id),(d.mouse_drag||d.touch_drag)&&("mouseup"==b.type?(d.stX==b.pageX&&d.stY==b.pageY&&(d.samePointRelease=!0),d._recent="drag",d._dragging=!1,d._playing||d.Animate()):(b.preventDefault(),d._dragging=!1,d._pinching?(d._pinching=!1,d._wheel=!1,d.cFlag._nd=!0,d.cFlag._zi=!1,d.cFlag._zo=!1):(d._recent="drag",d._playing||d.Animate())),d._onHitArea=!1)))},mouseWheel:function(a,b){var c=a.data.self;return c._onfocus=c._dragging=!1,c.mouse_wheel_cur&&(c.focusOffX=a.pageX-c.$holder.offset().left-c.sW/2,c.focusOffY=a.pageY-c.$holder.offset().top-c.sH/2,c.changeOffset(!0,!0)),c._dragging=!1,b>0?c.rA!=c.zoom_max&&(c.zoom_single?c._wheel||(c.sRed=300):(c.rA*=b<1?1+.3*b:1.3,c.rA=c.rA>c.zoom_max?c.zoom_max:c.rA),c._wheel=!0,c.cFlag._zi=!0,clearTimeout(c.ani_timer),c._playing=!0,c.Animate(),c.cFlag._zi=!1):c.rA!=c.rF&&(c.zoom_single?c._wheel||(c.sRed=300):(c.rA/=b>-1?1+.3*-b:1.3,c.rA=c.rA<c.rF?c.rF:c.rA),c._wheel=!0,c.cFlag._zo=!0,clearTimeout(c.ani_timer),c._playing=!0,c.Animate(),c.cFlag._zo=!1),!1},autoHide:function(a){var b=a.data.self;clearTimeout(b.auto_timer),b.auto_timer=setTimeout(function(){b.$controls.fadeOut(600)},b.bu_delay),b.$holder.bind("mouseenter.sz",function(a){clearTimeout(b.auto_timer),b.$controls.fadeIn(300)})},correctTransValue:function(){var a=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(a[4]),this.transOffY=parseInt(a[5])},setDraggedPos:function(a,b,c){var d=this;""!==a&&(d.dX=a+d.transOffX,d.pan_limit?(d.dX=d.dX+c*d.iW<d.sW?d.sW-c*d.iW:d.dX,d.dX=d.dX>0?0:d.dX,c*d.iW<d.sW&&(d.dX=(d.sW-c*d.iW)/2)):(d.dX=d.dX+c*d.iW<d.sW/2?d.sW/2-c*d.iW:d.dX,d.dX=d.dX>d.sW/2?d.sW/2:d.dX)),""!==b&&(d.dY=b+d.transOffY,d.pan_limit?(d.dY=d.dY+c*d.iH<d.sH?d.sH-c*d.iH:d.dY,d.dY=d.dY>0?0:d.dY,c*d.iH<d.sH&&(d.dY=(d.sH-c*d.iH)/2)):(d.dY=d.dY+c*d.iH<d.sH/2?d.sH/2-c*d.iH:d.dY,d.dY=d.dY>d.sH/2?d.sH/2:d.dY))},Animate:function(){var a=this,b=.5;if(a.cFlag._nd=!0,a.ani_end=!1,a.cFlag._zi&&(a._wheel||a.zoom_single||(a.rA*=a.zoom_speed),a.rA>a.zoom_max&&(a.rA=a.zoom_max),a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="zoomIn",a._onfocus=a._dragging=!1),a.cFlag._zo&&(a._wheel||a.zoom_single||(a.rA/=a.zoom_speed),0!=a.zoom_min?a.rA<a.zoom_min&&(a.rA=a.zoom_min):a.rA<a.rF&&(a.rA=a.rF),a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="zoomOut",a._onfocus=a._dragging=!1),a.zoom_single&&!a.cFlag._rs&&("zoomIn"==a._recent?(a.sRed+=(10-a.sRed)/6,a.rA+=(a.zoom_max-a.rA)/(1/(a.pan_speed_o+1)*a.sRed+1)):"zoomOut"==a._recent&&(a.sRed+=(3-a.sRed)/3,a.rA+=(a.rF-a.rA)/((1/a.pan_speed_o+1)*a.sRed+1))),a.pan_speed=(Math.max(1,1+(a.sW+a.sH)/500)+a.pan_speed_o*a.pan_speed_o/4)/Math.max(1,a.rA/2),a.cFlag._ml&&(a.oX-=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="left",a._onfocus=a._dragging=!1),a.cFlag._mr&&(a.oX+=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="right",a._onfocus=a._dragging=!1),a.cFlag._mu&&(a.oY-=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="up",a._onfocus=a._dragging=!1),a.cFlag._md&&(a.oY+=a.pan_speed,a.cFlag._nd=!1,a.cFlag._rs=!1,a._recent="down",a._onfocus=a._dragging=!1),a.cFlag._rs&&(a.oX+=(a.fX-a.oX)/8,a.oY+=(a.fY-a.oY)/8,a.cFlag._nd=!1,a._recent="reset",a._onfocus=a._dragging=!1),a.zoom_single&&"reset"!==a._recent?a._onfocus?a._sc+=(a.rA-a._sc)/a.reduction:a._sc=a.rA:a._sc+=(a.rA-a._sc)/(a.ani_smooth/(a._onfocus?a.reduction:1)),a._w=a._sc*a.iW,a._h=a._sc*a.iH,a._dragging&&(a.tX=a.dX,a.tY=a.dY,a.changeOffset(!0,!0)),"zoomIn"==a._recent?(a._w>a.rA*a.iW-b&&!a.zoom_single?(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA):a._w>a.zoom_max*a.iW-b&&a.zoom_single&&(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA=a.zoom_max),a.ani_end&&(a._w=a._sc*a.iW,a._h=a._sc*a.iH)):"zoomOut"==a._recent&&(a._w<a.rA*a.iW+b&&!a.zoom_single?(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA):a._w<a.rF*a.iW+b&&a.zoom_single&&(a.cFlag._nd&&(a.ani_end=!0),a._sc=a.rA=a.rF),a.ani_end&&(a._w=a._sc*a.iW,a._h=a._sc*a.iH)),a.limitX=(a._w-a.sW)/(a._w/a.sW)/2,a.limitY=(a._h-a.sH)/(a._h/a.sH)/2,a._dragging||(a.pan_limit?(a.oX<-a.limitX-a.focusOffX&&(a.oX=-a.limitX-a.focusOffX),a.oX>a.limitX-a.focusOffX&&(a.oX=a.limitX-a.focusOffX),a._w<a.sW&&(a.tX=(a.sW-a._w)/2,a.changeOffset(!0,!1)),a.oY<-a.limitY-a.focusOffY&&(a.oY=-a.limitY-a.focusOffY),a.oY>a.limitY-a.focusOffY&&(a.oY=a.limitY-a.focusOffY),a._h<a.sH&&(a.tY=(a.sH-a._h)/2,a.changeOffset(!1,!0))):(a.oX<-a.limitX-a.focusOffX/a._w*a.sW-a.sW/2/(a._w/a.sW)&&(a.oX=-a.limitX-a.focusOffX/a._w*a.sW-a.sW/2/(a._w/a.sW)),a.oX>a.limitX-a.focusOffX/a._w*a.sW+a.sW/2/(a._w/a.sW)&&(a.oX=a.limitX-a.focusOffX/a._w*a.sW+a.sW/2/(a._w/a.sW)),a.oY<-a.limitY-a.focusOffY/a._h*a.sH-a.sH/(a._h/a.sH*2)&&(a.oY=-a.limitY-a.focusOffY/a._h*a.sH-a.sH/(a._h/a.sH*2)),a.oY>a.limitY-a.focusOffY/a._h*a.sH+a.sH/(a._h/a.sH*2)&&(a.oY=a.limitY-a.focusOffY/a._h*a.sH+a.sH/(a._h/a.sH*2)))),a._dragging||"drag"==a._recent||(a.tX=(a.sW-a._w)/2+a.focusOffX+a.oX*(a._w/a.sW),a.tY=(a.sH-a._h)/2+a.focusOffY+a.oY*(a._h/a.sH),1===a.ani_smooth&&(a.cFlag._nd=!0,a.ani_end=!0)),"zoomIn"==a._recent||"zoomOut"==a._recent||a.cFlag._rs?(a._x=a.tX,a._y=a.tY):(a._x+=(a.tX-a._x)/(a.ani_smooth/(a._onfocus?a.reduction:1)),a._y+=(a.tY-a._y)/(a.ani_smooth/(a._onfocus?a.reduction:1))),"left"==a._recent?(a._x<a.tX+b||1===a.ani_smooth)&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX):"right"==a._recent?(a._x>a.tX-b||1===a.ani_smooth)&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX):"up"==a._recent?(a._y<a.tY+b||1===a.ani_smooth)&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._y=a.tY):"down"==a._recent?(a._y>a.tY-b||1===a.ani_smooth)&&(a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._y=a.tY):"drag"==a._recent&&(a._x+b>=a.tX&&a._x-b<=a.tX&&a._y+b>=a.tY&&a._y-b<=a.tY||1===a.ani_smooth)&&(a._onfocus&&(a._dragging=!1),a.cFlag._nd?a.ani_end=!0:"",a._recent="",a._x=a.tX,a._y=a.tY),a.cFlag._rs&&a._w+b>=a.rA*a.iW&&a._w-b<=a.rA*a.iW&&a.oX<=a.fX+b&&a.oX>=a.fX-b&&a.oY<=a.fY+b&&a.oY>=a.fY-b&&(a.ani_end=!0,a._recent="",a.cFlag._rs=!1,a.cFlag._nd=!0,a._x=a.tX,a._y=a.tY,a._sc=a.rA,a._w=a._sc*a.iW,a._h=a._sc*a.iH),a.rA==a.rF&&a.iW*a.rA<=a.sW&&a.iH*a.rA<=a.sH){if(a.buttons[1].$ob.css("opacity")>.5&&a.rA>=a.rF&&(""==a.init_zoom||a.rA<a.init_zoom)&&(""==a.zoom_min||a.rA<a.zoom_min)){a.pan_limit&&a._moveCursor&&!a._moveCursor&&(a.$image.css("cursor","default"),a.$hitArea.css("cursor","default"));for(var c=1;c<(a.pan_limit&&!a._moveCursor?a.buttons_total:2);c++)a.buttons[c].$ob.css({opacity:.4}),a._wheel=!1,a.$holder.find("#"+a.buttons[c]._var+"norm").show(),a.$holder.find("#"+a.buttons[c]._var+"over").hide()}}else if(a.buttons[1].$ob.css("opacity")<.5){a._moveCursor&&a.mouse_drag&&(a.$image.css("cursor","move"),a.$hitArea.css("cursor","move"));for(var c=1;c<a.buttons_total;c++)a.buttons[c].$ob.css("opacity",.7)}a.rA==a.zoom_max?a.buttons[0].$ob.css("opacity")>.5&&(a.buttons[0].$ob.css("opacity",.4),a._wheel=!1,a.$holder.find("#"+a.buttons[0]._var+"norm").show(),a.$holder.find("#"+a.buttons[0]._var+"over").hide()):a.buttons[0].$ob.css("opacity")<.5&&a.buttons[0].$ob.css("opacity",.7),g?a.$image.css(g,"translate("+a._x.toFixed(14)+"px,"+a._y.toFixed(14)+"px) scale("+a._sc+")"):a.$image.css({left:a._x,top:a._y,width:a._w,height:a._h}),a.$loc_cont&&a.updateLocations(a._x,a._y,a._sc,a.locations),!g&&a.map_coordinates.length>0&&a.updateMap(),a.ani_end&&!a._dragging&&"drag"!=a._recent?(a._playing=!1,a._recent="",a.cX=(-a._x+a.sW/2)/a.rA,a.cY=(-a._y+a.sH/2)/a.rA,a.onUPDATE&&a.onUPDATE(a.getZoomData(),!1),a.onZOOM_PAN&&a.onZOOM_PAN(a.getZoomData()),clearTimeout(a.ani_timer)):(a._playing=!0,a.onUPDATE&&a.onUPDATE(a.getZoomData(),!0),a.ani_timer=setTimeout(function(){a.Animate()},28))},updateLocations:function(b,c,d,e){""!==this.onLANDMARK&&(d>=this.show_at_zoom?this._landmark||(this._landmark=!0,this.onLANDMARK(!0)):this._landmark&&(this._landmark=!1,this.onLANDMARK(!1)));for(var f=0;f<e.length;f++){var h,i,j=e[f].x*d+b,k=e[f].y*d+c;d>=e[f].showAt?(e[f].scale&&g?(h=e[f].w2pad*this._sc,i=e[f].h2*this._sc):(h=e[f].w2pad,i=e[f].h2),j>-h&&j<this.sW+h&&(k>-i&&k<this.sH+i&&e[f].lab||k>0&&k<this.sH+2*i&&!e[f].lab)?e[f].vis||(e[f].vis=!0,g?e[f].ob.stop().css("display","block").animate({opacity:1},300):e[f].ob.show()):e[f].vis&&(e[f].vis=!1,g?e[f].ob.stop().animate({opacity:0},200,function(){a(this).hide()}):e[f].ob.hide())):e[f].vis&&(e[f].vis=!1,g?e[f].ob.stop().animate({opacity:0},200,function(){a(this).hide()}):e[f].ob.hide()),(j!==e[f].lpx||k!==e[f].lpy&&e[f].vis)&&(g?e[f].ob.css(g,"translate("+j.toFixed(14)+"px,"+k.toFixed(14)+"px)"+(e[f].scale?" scale("+this._sc+")":"")):e[f].ob.css({left:j,top:k})),e[f].lpx=j,e[f].lpy=k}},roundBG:function(b,c,d,e,f,g,h,i,j,k){var l=25;b.append(a('<div class="bgi'+c+'" style="background-position:'+-(g-f)+"px "+(-(l-f)-k)+'px"></div>\t\t\t\t<div class="bgh'+c+'"></div>\t\t\t\t<div class="bgi'+c+'" style="background-position:'+-g+"px "+(-(l-f)-k)+"px; left:"+(d-f)+'px"></div>\t\t\t\t<div class="bgi'+c+'" style="background-position:'+-(g-f)+"px "+(-l-k)+"px; top:"+(e-f)+'px"></div>\t\t\t\t<div class="bgh'+c+'" style = "top:'+(e-f)+"px; left:"+f+'px"></div>\t\t\t\t<div class="bgi'+c+'" style="background-position:'+-g+"px "+(-l-k)+"px; top:"+(e-f)+"px; left:"+(d-f)+'px"></div>\t\t\t\t<div class="bgc'+c+'"></div>')),a(".bgi"+c).css({position:"absolute",width:f,height:f,"background-image":"url("+i+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1}),a(".bgh"+c).css({position:"absolute",width:d-2*f,height:f,"background-color":h,left:f}),a(".bgc"+c).css({position:"absolute",width:d,height:e-2*f,"background-color":h,top:f,left:0})},changeOffset:function(a,b){a&&(this.oX=(this.tX-(this.sW-this._w)/2-this.focusOffX)/(this._w/this.sW)),b&&(this.oY=(this.tY-(this.sH-this._h)/2-this.focusOffY)/(this._h/this.sH))},updateMap:function(){var b=this,c=0;b.mapAreas.each(function(){for(var d=[],e=0;e<b.map_coordinates[c].length;e++)d[e]=b.map_coordinates[c][e]*b._sc;d=d.join(","),a(this).attr("coords",d),c++})},haltAnimation:function(){clearTimeout(this.ani_timer),this._playing=!1,this._recent=""},destroy:function(){var d=this;if(d.assetsLoaded){d.haltAnimation();for(prop in d.orig_style)d.orig_style[prop][0]!==!1&&void 0!==d.orig_style[prop][0]&&("width"===d.orig_style[prop][0]||"height"===d.orig_style[prop][0]?0!==parseInt(d.orig_style[prop][1])&&d.$image.css(d.orig_style[prop][0],d.orig_style[prop][1]):d.$image.css(d.orig_style[prop][0],d.orig_style[prop][1]));clearTimeout(d.auto_timer),a(c).unbind(".sz"+d.id),a(b).unbind(".sz"+d.id),
d.$holder.unbind(".sz"),d.$controls=void 0}else d.$image.show();""==d.container?""==d.image_url?(d.$image.insertBefore(d.$holder),void 0!==d.$holder&&d.$holder.remove()):(d.$elem.empty(),d.$loc_cont[0]&&d.$elem.append(d.loc_clone)):(d.$image.insertBefore(d.$holder),d.$holder.empty(),d.$image.wrap(d.$holder),d.$loc_cont[0]&&d.$holder.append(d.loc_clone)),d.$elem.removeData("smoothZoom"),d.$holder=void 0,d.Buttons=void 0,d.op=void 0,d.$image=void 0},focusTo:function(a){var b=this;b.assetsLoaded&&(void 0===a.zoom||""===a.zoom||0==a.zoom?a.zoom=b.rA:a.zoom/=100,b._onfocus=!0,a.zoom>b.rA&&b.rA!=b.zoom_max?(b.rA=a.zoom,b.rA=b.rA>b.zoom_max?b.zoom_max:b.rA):a.zoom<b.rA&&b.rA!=b.rF&&(b.rA=a.zoom,b.rA=b.rA<b.rF?b.rF:b.rA),b.transOffX=b.transOffY=0,b.setDraggedPos(void 0===a.x||""===a.x?"":-a.x*b.rA+b.sW/2,void 0===a.y||""===a.y?"":-a.y*b.rA+b.sH/2,b.rA),b.reduction=a.speed?a.speed/10:b.focusSpeed,b._recent="drag",b._dragging=!0,b._playing||b.Animate())},zoomIn:function(a){this.buttons[0].$ob.trigger(this.event_down,{id:0})},zoomOut:function(a){this.buttons[1].$ob.trigger(this.event_down,{id:1})},moveRight:function(a){this.buttons[2].$ob.trigger(this.event_down,{id:2})},moveLeft:function(a){this.buttons[3].$ob.trigger(this.event_down,{id:3})},moveUp:function(a){this.buttons[4].$ob.trigger(this.event_down,{id:4})},moveDown:function(a){this.buttons[5].$ob.trigger(this.event_down,{id:5})},Reset:function(a){this.buttons[6].$ob.trigger(this.event_down,{id:6})},getZoomData:function(a){return{normX:(-this._x/this.rA).toFixed(14),normY:(-this._y/this.rA).toFixed(14),normWidth:this.iW,normHeight:this.iH,scaledX:-this._x.toFixed(14),scaledY:-this._y.toFixed(14),scaledWidth:this._w,scaledHeight:this._h,centerX:(-this._x.toFixed(14)+this.sW/2)/this.rA,centerY:(-this._y.toFixed(14)+this.sH/2)/this.rA,ratio:this.rA}},addLandmark:function(b){if(this.$loc_cont){for(var c=b.length,d=0;d<c;d++){var e=a(b[d]);this.$loc_cont.append(e),this.setLocation(e)}c>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},attachLandmark:function(b){if(this.$loc_cont){for(var c=b.length,d=0;d<c;d++)this.setLocation(b[d]instanceof jQuery?b[d]:a("#"+b[d]));c>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},removeLandmark:function(a){if(this.$loc_cont){if(a)for(var b=a.length,c=0;c<b;c++)for(var d=0;d<this.locations.length;d++)(a[c]instanceof jQuery&&this.locations[d].ob[0]==a[c][0]||!(a[c]instanceof jQuery)&&this.locations[d].ob.attr("id")==a[c])&&(this.locations[d].ob.remove(),this.locations.splice(d,1),d--);else this.locations.length>0&&(this.locations[this.locations.length-1].ob.remove(),this.locations.pop());b>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},refreshAllLandmarks:function(){var b=this,c=b.$loc_cont.children(".item");b.show_at_zoom=parseInt(b.$loc_cont.data("show-at-zoom"),10)/100,b.allow_scale=f(b.$loc_cont.data("allow-scale")),b.allow_drag=f(b.$loc_cont.data("allow-drag"));for(var d=0;d<b.locations.length;d++){var e=!1;c.each(function(){b.locations[d].ob[0]==a(this)[0]&&(e=!0)}),e||(b.locations.splice(d,1),d--)}c.each(function(){for(var c=!1,d=0;d<b.locations.length;d++)if(b.locations[d].ob[0]==a(this)[0]){c=!0;break}c||b.setLocation(a(this))}),this.updateLocations(this._x,this._y,this._sc,this.locations)},resize:function(a){var b;if(a.data){a.preventDefault(),b=a.data.self;var c=b.$holder.parent().width(),d=b.$holder.parent().height();b.oW&&(c=Math.min(c,b.oW)),b.sW=c,b.oH?b.oW&&b.maintain_ratio&&(b.sH=c/(b.oW/b.oH)):b.sH=d}else b=this,a.width&&(b.sW=a.width),a.height&&(b.sH=a.height),a.max_WIDTH&&(b.w_max=a.max_WIDTH),a.max_HEIGHT&&(b.h_max=a.max_HEIGHT);0!==b.w_max&&""!==b.w_max&&(b.sW=Math.min(b.sW,b.w_max)),0!==b.h_max&&""!==b.h_max&&(b.sH=Math.min(b.sH,b.h_max)),b.$holder.css({width:b.sW,height:b.sH}),b.bord_size>0&&(b.border[0].height(b.sH),b.border[1].css({height:b.sH,left:b.sW-b.bord_size}),b.border[2].width(b.sW-2*b.bord_size),b.border[3].css({width:b.sW-2*b.bord_size,top:b.sH-b.bord_size})),"center"==b.bu_align[1]&&b.$controls.css("left",parseInt((b.sW-b.cBW)/2)),"center"==b.bu_align[0]&&b.$controls.css("top",parseInt((b.sH-b.cBH)/2)),b.rF=b.rR=b.checkRatio(b.sW,b.sH,b.iW,b.iH,b.zoom_fit),0==b.zoom_min&&b.rA<b.rF&&(b.rA=b.rF),b.focusTo({x:b.cX,y:b.cY,zoom:"",speed:10})}},a.fn.smoothZoom=function(b){for(var c=this,d=c.length,f=0;f<d;f++){var g=a(c[f]),h=g.data("smoothZoom");if(h){if("getZoomData"==b)return h[b].apply(h,Array.prototype.slice.call(arguments,1));h[b]&&h[b].apply(h,Array.prototype.slice.call(arguments,1))}else"object"!=typeof b&&b||g.data("smoothZoom",new e(g,b))}if("getZoomData"!==b)return this},b.Modernizr=function(a,b,c){function d(a){p.cssText=a}function f(a,b){return typeof a===b}function g(a,b){return!!~(""+a).indexOf(b)}function h(a,b){for(var d in a){var e=a[d];if(!g(e,"-")&&p[e]!==c)return"pfx"!=b||e}return!1}function i(a,b,d){for(var e in a){var g=b[a[e]];if(g!==c)return d===!1?a[e]:f(g,"function")?g.bind(d||b):g}return!1}function j(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+u.join(d+" ")+d).split(" ");return f(b,"string")||f(b,"undefined")?h(e,b):(e=(a+" "+v.join(d+" ")+d).split(" "),i(e,b,c))}var q,B,E,k="2.8.2",l={},m=b.documentElement,n="modernizr",o=b.createElement(n),p=o.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},z=[],A=z.slice,C=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:n+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',n,'">',a,"</style>"].join(""),j.id=n,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=m.style.overflow,m.style.overflow="hidden",m.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),m.style.overflow=i),!!g},D={}.hasOwnProperty;E=f(D,"undefined")||f(D.call,"undefined")?function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")}:function(a,b){return D.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=A.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(A.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(A.call(arguments)))};return d}),w.borderradius=function(){return j("borderRadius")},w.csstransforms=function(){return!!j("transform")},w.csstransforms3d=function(){var a=!!j("perspective");return a&&"webkitPerspective"in m.style&&C("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a};for(var F in w)E(w,F)&&(B=F.toLowerCase(),l[B]=w[F](),z.push((l[B]?"":"no-")+B));return l.addTest=function(a,b){if("object"==typeof a)for(var d in a)E(a,d)&&l.addTest(d,a[d]);else{if(a=a.toLowerCase(),l[a]!==c)return l;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(m.className+=" "+(b?"":"no-")+a),l[a]=b}return l},d(""),o=q=null,l._version=k,l._prefixes=s,l._domPrefixes=v,l._cssomPrefixes=u,l.testProp=function(a){return h([a])},l.testAllProps=j,l.testStyles=C,l.prefixed=function(a,b,c){return b?j(a,b,c):j(a,"pfx")},l}(this,c);var g=Modernizr.prefixed("transform"),h=Modernizr.prefixed("transformOrigin"),i=Modernizr.prefixed("borderRadius"),j=Modernizr.csstransforms3d}(jQuery,window,document),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b)["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});